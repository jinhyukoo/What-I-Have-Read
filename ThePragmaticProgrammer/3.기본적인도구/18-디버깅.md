## 디버깅

아무도 완벽한 소프트웨어를 작성하지 못하기 때문에, 하루의 대부분을 디버깅하는데 보낼 것이라는 건 기정사실이다.

디버깅에 관련된 몇 가지 문제를 살펴보고 찾기 힘든 버그를 찾아내는 일반적인 전략을 몇 가지 알아보도록 하자.

### 디버깅의 심리

디버깅은 단지 문제 해결이라는 사실을 포용하고, 그 방식으로 공략하라.

다른 사람의 버그를 비난하기보다는 해결하는데 집중하라.

### 디버깅 사고방식

`가장 속이기 쉬운 사람은 자기 자신이다 - 에드워드 불워-리톤`

디버깅을 시작하기 앞서서 올바른 사고방식을 갖는게 중요하다.

자신의 자아를 보호하기 위해 매일 사용하는 많은 방어시설을 꺼버려야 하고, 우리에게 부과되는 프로젝트의 압력을 무시해서 스스로를 편안하게 만들어야 한다.

디버깅을 할 때 **당황하지 마라.**

한 발짝 뒤로 물러나서 무엇이 자신으로 하여금 버그가 있을 거라고 생각하게 하는지, 그 증후의 원인이 무엇일지 실제로 생각해보는 것이 정말 중요하다.

디버깅을 할 때는 근시를 조심하라. 표면에 보이는 것이 다가 아니다. 항상 문제의 근본적인 원인을 발견하기 위해 노력하자.

### 어디에서 시작할까

컴파일러가 찾아줄 수 있는 문제를 찾는데 시간을 허비할 필요는 없다.

어떤 문제건 해결을 하려면 관련 자료를 모두 모을 필요가 있다.

일단 관찰을 정확히 할 필요가 있다. 여러 방법을 통해 실제 버그에 대해 정확히 파악하라.

### 디버깅 전략

**데이터 가시화하기**

프로그램이 뭘 하는지 알아내는 가장 쉬운 방법을 프로그램이 다루는 데이터를 보는 것이다.

데이터 간의 상호관계를 시각화 할 수 있는 디버거를 사용하면 자신의 데이터에 대해 훨씬 깊은 통찰을 얻을 수 있다.

시각화를 지원하지 않더라도 직접 종이에 그려보는 방법도 있다.

**트레이싱**

디버거는 일반적으로 프로그램의 현재 상태에 주목하지만 때로는 그 이상이 필요하기도 하다.

스택 트레이스는 시간에 따라 프로그램이나 데이터 구조의 상태가 변하는 것을 알 수 있게 해준다.

트레이싱 구문은 디버거가 진단할 수 없는 몇 가지 종류의 에러를 진단하는 데에는 특별히 효과적이다.

동시 프로세스, 실시간 시스템, 이벤트 기반 애플리케이션 등, 시간 자체가 중요한 요소가 되는 시스템에서라면 값을 매길 수 없을 정도로 귀중하다.

**고무오리**

고무 오리에게 천천히 자신이 처한 상황을 설명해보라.

설명하다보면 나도 모르게 문제를 찾게 될 것이다.

**제거과정**

버그가 생긴다면 OS, 라이브러리, 데이터베이스 등 외부요인보다는 내가 짠 코드에서 발생했을 확률이 높다.

버그를 일으킬만한 요인들을 하나씨 제거해나가면서 버그가 발생된 지점을 찾아가자.

**놀람의 요소**

어떤 버그가 발생했을 때, 우리가 굳게 믿고 있던 진실들을 재평가 할 필요가 있다.

여기서 버그가 발생할 리는 없어라는 생각은 버리자.

`가정하지 말고 증명하자.`

이 코드에 대해 알고 있다고 대충 얼버무리지 말고 맥락 안에서, 데이터로, 경계 조건 하에서 증명해야 한다.

놀라운 버그를 마주치면 단순히 고치는 것을 넘어 왜 이 실패가 더 일찍 발견되지 않았을까 생각해 볼 필요가 있다.

버그를 미리 잡을 수 있도록 단위 테스트나 다른 테스트를 수정할 필요가 있는지 고려하라.

### 요약

개발자라면 디버깅을 피하는 건 불가능하다.

내 자신을 믿지 마라.

버그에 대해 시각화하면 좋다.

버그가 발생하면 천천히 그 상황을 분석하자. 그리고 관련 없는 요소들을 제거해가며 디버깅의 출발점을 찾자.

가정보단 증명